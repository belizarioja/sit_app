(globalThis["webpackChunksit_frontend"]=globalThis["webpackChunksit_frontend"]||[]).push([[588],{5770:e=>{e.exports={endpoint_path_v2:"https://bck-test.factura-smart.com/",version:"2.0.0"}},9168:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>He});var s=a(3673),l=a(8880);const o={class:"my-font my-fondo reports"},n=(0,s._)("div",{class:"col-md-3 col-sm-12 col-xs-12"},[(0,s._)("span",{class:"text-secondary",style:{margin:"0 20px","font-size":"25px","font-weight":"bolder"}},"Informe")],-1),r=(0,s._)("div",{class:"row q-pa-sm q-gutter-sm"},null,-1),i={class:"row justify-end q-gutter-sm"},m={class:"row"},c={class:"row justify-end q-gutter-sm"},d={class:"row"},u={class:"row justify-end q-gutter-sm"},p={class:"row"},h={class:"q-pa-sm"},b={class:"tituloDrawer"},w=(0,s._)("div",{style:{margin:"0 20px","font-size":"25px","font-weight":"bolder"}},"Filtros",-1),f={style:{margin:"20px 5px",border:"solid 1px #ccc","border-radius":"5px",padding:"15px",position:"relative"}},_=(0,s._)("span",{class:"bg-white",style:{position:"absolute",top:"-12px",left:"10px",color:"#ccc"}},"Fechas:",-1),j={style:{display:"flex","justify-content":"space-around"}},g={class:"row items-center justify-end"},y={style:{margin:"20px 5px",border:"solid 1px #ccc","border-radius":"5px",padding:"15px",position:"relative"}},v=(0,s._)("span",{class:"bg-white",style:{position:"absolute",top:"-12px",left:"10px",color:"#ccc"}},"Cliente emisor:",-1),x={class:"text-center"};function k(e,t,a,k,T,D){const F=(0,s.up)("q-tab"),E=(0,s.up)("q-tabs"),z=(0,s.up)("q-btn"),C=(0,s.up)("reporte-emisor"),A=(0,s.up)("q-tab-panel"),W=(0,s.up)("reporte-semanal"),S=(0,s.up)("reporte-anual"),q=(0,s.up)("q-tab-panels"),O=(0,s.up)("q-icon"),M=(0,s.up)("q-date"),N=(0,s.up)("q-popup-proxy"),$=(0,s.up)("q-input"),I=(0,s.up)("q-select"),Z=(0,s.up)("q-scroll-area"),Q=(0,s.up)("q-drawer"),L=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)("section",o,[n,r,(0,s.Wm)(E,{modelValue:T.tab,"onUpdate:modelValue":t[0]||(t[0]=e=>T.tab=e),dense:"",class:"text-grey","active-color":"positive","indicator-color":"positive",align:"justify","narrow-indicator":"","inline-label":""},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{icon:"date_range",name:"semanal",label:"Semanal"}),(0,s.Wm)(F,{icon:"storefront",name:"emisor",label:"Emisor"}),(0,s.Wm)(F,{icon:"calendar_month",name:"anual",label:"Anual"})])),_:1},8,["modelValue"]),(0,s.Wm)(q,{modelValue:T.tab,"onUpdate:modelValue":t[3]||(t[3]=e=>T.tab=e),animated:"",class:"my-fondo"},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{name:"emisor",class:"q-gutter-md"},{default:(0,s.w5)((()=>[(0,s._)("div",i,[(0,s.Wm)(z,{"icon-right":"filter_alt",color:"secondary",label:"Filtrar",onClick:t[1]||(t[1]=e=>T.drawerFilters=!0)}),(0,s.Wm)(z,{"icon-right":"file_download",color:"secondary",label:"Exportar a Excel",onClick:D.exportExcelEmisor},null,8,["onClick"]),(0,s.Wm)(z,{"icon-right":"picture_as_pdf",color:"secondary",label:"Exportar a PDF",onClick:D.exportPDFEmisor},null,8,["onClick"])]),(0,s._)("div",m,[(0,s.wy)((0,s.Wm)(C,{ref:"reporte_emisor",mesName:T.mes,emisores:T.dataTableEmisor,class:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},null,8,["mesName","emisores"]),[[l.F8,!0]])])])),_:1}),(0,s.Wm)(A,{name:"semanal",class:"q-gutter-md"},{default:(0,s.w5)((()=>[(0,s._)("div",c,[(0,s.Wm)(z,{"icon-right":"filter_alt",color:"secondary",label:"Filtrar",onClick:t[2]||(t[2]=e=>T.drawerFilters=!0)}),(0,s.Wm)(z,{"icon-right":"file_download",color:"secondary",label:"Exportar a Excel",onClick:D.exportExcelSemanal},null,8,["onClick"]),(0,s.Wm)(z,{"icon-right":"picture_as_pdf",color:"secondary",label:"Exportar a PDF",onClick:D.exportPDFSemanal},null,8,["onClick"])]),(0,s._)("div",d,[(0,s.wy)((0,s.Wm)(W,{ref:"reporte_semanal",date:T.mes,semanales:T.dataTableSemanal,class:"col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 q-gutter-sm"},null,8,["date","semanales"]),[[l.F8,!0]])])])),_:1}),(0,s.Wm)(A,{name:"anual",class:"q-gutter-md"},{default:(0,s.w5)((()=>[(0,s._)("div",u,[(0,s.Wm)(z,{"icon-right":"file_download",color:"secondary",label:"Exportar a Excel",onClick:D.exportExcelAnual},null,8,["onClick"]),(0,s.Wm)(z,{"icon-right":"picture_as_pdf",color:"secondary",label:"Exportar a PDF",onClick:D.exportPDFAnual},null,8,["onClick"])]),(0,s._)("div",p,[(0,s.wy)((0,s.Wm)(S,{ref:"reporte_anual",meses:T.dataTableAnual,class:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},null,8,["meses"]),[[l.F8,!0]])])])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(Q,{modelValue:T.drawerFilters,"onUpdate:modelValue":t[9]||(t[9]=e=>T.drawerFilters=e),side:"right",width:300,breakpoint:700,overlay:"",elevated:"",class:"bg-white text-secondary"},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{class:"fit"},{default:(0,s.w5)((()=>[(0,s._)("div",h,[(0,s._)("div",b,[w,(0,s.Wm)(O,{color:"red",name:"close",onClick:t[4]||(t[4]=e=>T.drawerFilters=!1),class:"cursor-pointer",style:{"font-size":"x-large"}})]),(0,s._)("div",f,[_,(0,s._)("div",j,[(0,s.Wm)($,{dense:"",filled:"",label:"Fecha",disable:D.isDisabledMes(),mask:"date",modelValue:T.mes,"onUpdate:modelValue":t[6]||(t[6]=e=>T.mes=e),class:"col-md-3 col-sm-6 col-xs-6"},{append:(0,s.w5)((()=>[(0,s.Wm)(O,{name:"event",class:"cursor-pointer"},{default:(0,s.w5)((()=>[(0,s.Wm)(N,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,s.w5)((()=>[(0,s.Wm)(M,{modelValue:T.mes,"onUpdate:modelValue":t[5]||(t[5]=e=>T.mes=e),locale:T.myLocale},{default:(0,s.w5)((()=>[(0,s._)("div",g,[(0,s.wy)((0,s.Wm)(z,{label:"Close",color:"primary",flat:""},null,512),[[L]])])])),_:1},8,["modelValue","locale"])])),_:1})])),_:1})])),_:1},8,["disable","modelValue"])])]),(0,s._)("div",y,[v,(0,s.Wm)(I,{label:"Buscar por Nombre del Emisor",disable:D.isDisabledEmisor(),dense:"",filled:"",modelValue:T.emisor,"onUpdate:modelValue":t[7]||(t[7]=e=>T.emisor=e),"use-input":"","hide-selected":"","fill-input":"","options-dense":"","option-label":"label","option-value":"value","input-debounce":"0",options:T.emisorOptions},null,8,["disable","modelValue","options"])]),(0,s._)("div",x,[(0,s.Wm)(z,{label:"Cerrar",color:"negative",onClick:t[8]||(t[8]=e=>T.drawerFilters=!1)})])])])),_:1})])),_:1},8,["modelValue"])])}var T=a(1488),D=a.n(T),F=a(2323);const E=e=>((0,s.dD)("data-v-604268e0"),e=e(),(0,s.Cn)(),e),z={ref:"wrapper_table"},C=E((()=>(0,s._)("div",null,[(0,s._)("span",{class:"title"},"Control de Facturas Semanales")],-1))),A={class:"title"},W={class:"row q-gutter-sm"},S={align:"center"};function q(e,t,a,l,o,n){const r=(0,s.up)("q-separator"),i=(0,s.up)("q-th"),m=(0,s.up)("q-tr"),c=(0,s.up)("q-td"),d=(0,s.up)("q-table");return(0,s.wg)(),(0,s.iD)("div",z,[C,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.dataTableOne,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id,class:"column q-gutter-y-sm"},[(0,s.Wm)(r),(0,s._)("div",null,[(0,s._)("span",A,(0,F.zw)(e.name),1)]),(0,s.Wm)(d,{ref_for:!0,ref:"table_one",rows:l.makeOneRow(),"hide-bottom":""},{header:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{rowspan:"1",colspan:e.mes.length,style:{"font-weight":"bolder","font-size":"18px",color:"#65778D"}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,F.zw)(l.title),1)])),_:2},1032,["colspan"]),(0,s.Wm)(i,{rowspan:"2",style:{"font-weight":"bolder","font-size":"18px",color:"#0999FF"}},{default:(0,s.w5)((()=>[(0,s.Uk)("Total")])),_:1})])),_:2},1024),(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.mes,(e=>((0,s.wg)(),(0,s.j4)(i,{key:e},{default:(0,s.w5)((()=>[(0,s.Uk)(" Semana "+(0,F.zw)(e.semana),1)])),_:2},1024)))),128))])),_:2},1024)])),body:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.mes,(e=>((0,s.wg)(),(0,s.j4)(c,{align:"center",key:e.semana},{default:(0,s.w5)((()=>[(0,s.Uk)((0,F.zw)(e.total),1)])),_:2},1024)))),128)),(0,s.Wm)(c,{align:"center"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,F.zw)(e.total),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["rows"]),(0,s._)("div",W,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.mes,(e=>((0,s.wg)(),(0,s.j4)(d,{ref_for:!0,ref:"table_two",key:e.semana,rows:l.makeOneRow(),"hide-bottom":""},{header:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{rowspan:"1",colspan:"2",style:{"font-weight":"bolder","font-size":"14px",color:"#65778D"}},{default:(0,s.w5)((()=>[(0,s.Uk)(" Controles Asignados "+(0,F.zw)(l.getInitDate(e))+" al "+(0,F.zw)(l.getEndDate(e))+" "+(0,F.zw)(l.mesName),1)])),_:2},1024),(0,s.Wm)(i,{rowspan:"2",style:{"font-weight":"bolder","font-size":"14px",color:"#0999FF"}},{default:(0,s.w5)((()=>[(0,s.Uk)("Total")])),_:1})])),_:2},1024),(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{colspan:"1",rowspan:"1"},{default:(0,s.w5)((()=>[(0,s.Uk)("Control Inicial")])),_:1}),(0,s.Wm)(i,{colspan:"1",rowspan:"1"},{default:(0,s.w5)((()=>[(0,s.Uk)("Control Final")])),_:1})])),_:1})])),body:(0,s.w5)((()=>[(0,s._)("tr",null,[(0,s._)("td",null,(0,F.zw)(l.getControlInicial(e)),1),(0,s._)("td",null,(0,F.zw)(l.getControlFinal(e)),1),(0,s._)("td",S,(0,F.zw)(e.total),1)])])),_:2},1032,["rows"])))),128))])])))),128))],512)}var O=a(1959),M=a(7213),N=a(477),$=a.n(N),I=a(1093),Z=a.n(I);function Q(e){const t={"01":"Enero","02":"Febrero","03":"Marzo","04":"Abril","05":"Mayo","06":"Junio","07":"Julio","08":"Agosto","09":"Septiembre",1:"Enero",2:"Febrero",3:"Marzo",4:"Abril",5:"Mayo",6:"Junio",7:"Julio",8:"Agosto",9:"Septiembre",10:"Octubre",11:"Noviembre",12:"Diciembre"};return t[e]}const L={props:["semanales","date"],setup(e){const{semanales:t,date:a}=(0,O.BK)(e),l=(0,s.Fl)((()=>t.value)),o=(0,s.Fl)((()=>{const e=l.value.reduce(((e,t)=>e+t.total),0);return e})),n=e=>e?.semana.split("-")[0],r=e=>e?.semana.split("-")[1],i=e=>e?.controlInicial||"N/A",m=e=>e?.controlFinal||"N/A",c=(0,s.Fl)((()=>{let[e,t]=a.value.split("-");return t||(t=a.value.split("/")[1],e=a.value.split("/")[0]),`${Q(t)}-${e}`})),d=(0,s.Fl)((()=>{let[,e]=a.value.split("-");e||(e=a.value.split("/")[1]);const t=Q(e);return t})),u=(0,s.Fl)((()=>[{id:1,initDate:"01",endDate:"03",controlInicial:"inicial 1",controlFinal:"final 1",total:"12"}])),p=()=>[{}],h=()=>l.value[0]?.name;return{tab:h(),title:c,mesName:d,dataTableOne:l,dataTableTwo:u,totalTableOne:o,getInitDate:n,getEndDate:r,getControlInicial:i,getControlFinal:m,makeOneRow:p}},methods:{nameCurrentMonth(){const e=(new Date).getMonth()+1;return`${Q(e)}`},makeDataExcel(e){const{name:t,mes:a,total:s}=e,l=t.slice(0,20),o=[`Control de Facturas Semanales ${t}`],n=[this.title],r=a.reduce(((e,t)=>{const[a,s]=t.semana.split("-");return[...e,`Controles Asignados ${a} al ${s}`,"",""]}),[]),i=a.map((e=>e.semana)),m=a.map((e=>e.total)),c=a.reduce((e=>[...e,"Control Inicial","Control Final","Total"]),[]),d=a.reduce(((e,t)=>{const a=t.controlInicial||"N/A",s=t.controlFinal||"N/A";return[...e,a,s,t.total]}),[]);return{nameSheet:l,mainTitle:o,title1:n,title2:r,headers:i,content:m,header2:c,content2:d,total:s}},formatExcel({mainTitle:e,title1:t,title2:a,headers:s,content:l,header2:o,content2:n,total:r}={}){return[e,[],t,[...s,"Total"],[...l,r],[],[],a,[...o,`Total ${this.nameCurrentMonth()}`],[...n,r]]},exportExcel(){const e=Z().utils.book_new();this.dataTableOne.forEach((t=>{const{nameSheet:a,mainTitle:s,title1:l,title2:o,headers:n,content:r,header2:i,content2:m,total:c}=this.makeDataExcel(t),d=this.formatExcel({mainTitle:s,title1:l,title2:o,headers:n,content:r,header2:i,content2:m,total:c}),u=Z().utils.aoa_to_sheet(d);Z().utils.book_append_sheet(e,u,a)})),Z().writeFile(e,`smart-semanal-${this.title}.xlsx`)},isLastItem(e,t){return t<e.length-1},getPositionX(e,t=100){return e*t},getPositionY(){return 100},exportPDF(){const e=new M["default"]("p","pt");this.dataTableOne.forEach(((t,a)=>{const s=[255,255,255],l=[6,6,6],o=t.mes.map((e=>e.semana)),n=t.mes.map((e=>e.total));e.text(`Control de Facturas Semanales ${t.name}`,40,50),$()(e,{startY:60,head:[[this.nameCurrentMonth()]],headStyles:{fillColor:s,fontSize:16,textColor:l}}),$()(e,{startY:90,theme:"grid",head:[o],body:[n]}),t.mes.forEach(((t,a)=>{const o=["Control Inicial","Control Final","Total"],n=t.controlInicial||"N/A",r=t.controlFinal||"N/A",i=[n,r,t.total],[m,c]=t.semana.split("-");$()(e,{head:[[`Controles Asignados ${m} al ${c}`]],headStyles:{fillColor:s,textColor:l}}),$()(e,{theme:"grid",head:[o],body:[i],headStyles:{},bodyStyles:{},footStyles:{}})})),this.isLastItem(this.dataTableOne,a)&&e.addPage()})),e.save("smart_reporte_semanal.pdf")}}};var P=a(4260),U=a(5869),V=a(4993),R=a(8186),J=a(2414),Y=a(3884),B=a(7518),H=a.n(B);const K=(0,P.Z)(L,[["render",q],["__scopeId","data-v-604268e0"]]),G=K;H()(L,"components",{QSeparator:U.Z,QTable:V.Z,QTr:R.Z,QTh:J.Z,QTd:Y.Z});const X={style:{width:"100%",display:"flex","justify-content":"center"}},ee=(0,s._)("tr",null,[(0,s._)("th",null,"Mes"),(0,s._)("th",null,"Total")],-1);function te(e,t,a,l,o,n){const r=(0,s.up)("q-td"),i=(0,s.up)("q-tr"),m=(0,s.up)("q-table");return(0,s.wg)(),(0,s.iD)("div",X,[(0,s.Wm)(m,{ref:"table_anual",rows:l.year,"hide-bottom":"",style:{width:"400px"}},{header:(0,s.w5)((()=>[ee])),body:(0,s.w5)((e=>[(0,s.Wm)(i,{props:e},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{align:"center"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,F.zw)(e.row.month),1)])),_:2},1024),(0,s.Wm)(r,{align:"center"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,F.zw)(e.row.total),1)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows"])])}function ae(){const e=(new Date).getMonth()+1;return`${Q(e)}`}const se={props:["meses"],setup(e){const{meses:t}=(0,O.BK)(e),a=()=>t.value.reduce(((e,t)=>e+Number(t.cantidad)),0),l=(0,s.Fl)((()=>{const e=t.value.map((e=>{const t=Q(e.mes);return{month:t,total:e.cantidad}})),s=a();return[...e,{month:"Total",total:s}]}));return{year:l}},methods:{getChildRefs(){return this.$refs.table_anual},exportExcel(){const e=ae(),t=this.year.map((e=>({Mes:e.month,Total:e.total}))),a=Z().utils.json_to_sheet(t),s=Z().utils.book_new();Z().utils.book_append_sheet(s,a,"data"),Z().writeFile(s,`anual-${e}.xlsx`)},exportPDF(){const e=ae(),t=this.year.map((e=>({Mes:e.month,Total:String(e.total)}))),a=this.year.map((e=>[e.month,String(e.total)])),s=Object.keys(t[0]),l={title:40,table:50},o={title:60,table:60},n=new M["default"]("p","pt");n.text("Smart Reporte Anual",o.title,l.title),$()(n,{margin:{top:60},head:[s],body:a}),n.save(`smart-anual-${e}.pdf`)}}},le=(0,P.Z)(se,[["render",te]]),oe=le;H()(se,"components",{QTable:V.Z,QTr:R.Z,QTd:Y.Z});const ne=(0,s._)("th",{colspan:"1",rowspan:"2",style:{"font-weight":"bolder","font-size":"18px",color:"#65778D"}},"Cliente Emisor",-1),re=["colspan"],ie=(0,s._)("th",{colspan:"1",rowspan:"2",style:{"font-weight":"bolder","font-size":"18px",color:"#0999FF"}},"Total",-1);function me(e,t,a,l,o,n){const r=(0,s.up)("q-tr"),i=(0,s.up)("q-td"),m=(0,s.up)("q-table");return(0,s.wg)(),(0,s.j4)(m,{ref:"table_emisor",rows:l.mes,"hide-pagination":"","rows-per-page-options":[0]},{header:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[ne,(0,s._)("th",{colspan:l.semanas?.length,rowspan:"1",style:{"font-weight":"bolder","font-size":"18px",color:"#65778D"}},(0,F.zw)(l.title),9,re),ie])),_:1}),(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.semanas,(e=>((0,s.wg)(),(0,s.iD)("th",{colspan:"1",rowspan:"1",key:e.semana},(0,F.zw)(e.semana),1)))),128))])),_:1})])),body:(0,s.w5)((e=>[(0,s.Wm)(r,{props:e},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{align:"left"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,F.zw)(e.row.name),1)])),_:2},1024),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.row.mes,(e=>((0,s.wg)(),(0,s.j4)(i,{key:e.semana,align:"right"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,F.zw)(e.total),1)])),_:2},1024)))),128)),(0,s.Wm)(i,{align:"right"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,F.zw)(e.row.total),1)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows"])}const ce={props:["emisores","mesName"],setup(e){const{emisores:t,mesName:a}=(0,O.BK)(e),l=(0,s.Fl)((()=>t.value)),o=(0,s.Fl)((()=>l.value[0]?.mes)),n=(0,s.Fl)((()=>{let[e,t]=a.value.split("-");return t||(t=a.value.split("/")[1],e=a.value.split("/")[0]),`${Q(t)}-${e}`}));return{mes:l,semanas:o,title:n}},methods:{getChildRefs(){return this.$refs.table_emisor},getWeekHeader(e){const t=Object.entries(e).map((([e,t])=>[t.semana,t.total])),a=Object.fromEntries(t);return a},getArrayWeekHeader(e){const t=Object.entries(e).map((([e,t])=>[t.semana,t.total]));return t},exportExcel(){const e=this.mes.map((e=>({Emisor:e.name,...this.getWeekHeader(e.mes),Total:e.total}))),t=Z().utils.json_to_sheet(e),a=Z().utils.book_new();Z().utils.book_append_sheet(a,t,"data"),Z().writeFile(a,`smart-emisor-${this.title}.xlsx`)},exportPDF(){const[e]=this.mes,{mes:t}=e,a=Object.entries(t),s=a.map((([e,t])=>t.semana)),l=["Emisor",...s,"Total"],o=this.mes.map((e=>{const t=e.mes.map((e=>e.total)),a=e.mes.reduce(((e,t)=>e+Number(t.total)),0),s=e.name;return[s,...t,a]})),n={title:30},r={title:60},i=new M["default"]("p","pt");i.text("Reporte Semanal de Emisores",r.title,n.title),$()(i,{margin:{top:70},head:[l],body:o}),i.save("smart_reporte_emisores.pdf")}}},de=(0,P.Z)(ce,[["render",me]]),ue=de;H()(ce,"components",{QTable:V.Z,QTr:R.Z,QTd:Y.Z});var pe=a(52),he=a.n(pe);const be=a(5770),we=be.endpoint_path_v2;async function fe(e){const t=await he().post(`${we}reporte/anual`,e);return t}const _e={CANTIDAD:"cantidad",MES:"mes",TOTALIGTF:"totaligtf",TOTALIVA:"totaliva"};async function je(){const e={idtipodocumento:void 0,idserviciosmasivo:void 0,idcodigocomercial:void 0,estatus:1},t=await fe(e),a=t.data.data,s=a.map((e=>({[_e.MES]:e.mes,[_e.CANTIDAD]:e.cantidad,[_e.TOTALIGTF]:e.totaligtf,[_e.TOTALIVA]:e.totaliva})));return s}const ge=a(5770),ye=ge.endpoint_path_v2;async function ve({month:e,year:t}){const a={mes:e,annio:t},s=await he().post(`${ye}reporte/totalsemanastodos`,a);return s}const xe={SEMANA:"semana",CONTROL_INICIAL:"controlInicial",CONTROL_FINAL:"controlFinal",TOTAL:"total"},ke={ID:"id",NAME:"name",MES:"mes",TOTAL:"total"};function Te(e){return e.mes?.map((e=>({[xe.SEMANA]:e.semana,[xe.CONTROL_INICIAL]:e.inicia,[xe.CONTROL_FINAL]:e.termina,[xe.TOTAL]:e.total})))}function De(e){return e?.mes?.reduce(((e,t)=>e+Number(t.total)),0)}async function Fe({month:e,year:t}){const a=await ve({month:e,year:t}),s=a.data.data,l=s.map((e=>({[ke.ID]:e.idcliente,[ke.NAME]:e.cliente,[ke.MES]:Te(e),[ke.TOTAL]:De(e)})));return l}const Ee=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}];function ze(e){const t={1:"Enero",2:"Febrero",3:"Marzo",4:"Abril",5:"Mayo",6:"Junio",7:"Julio",8:"Agosto",9:"Septiembre",10:"Octubre",11:"Noviembre",12:"Diciembre"};return t[e]}function Ce(){const e=(new Date).getMonth()+1;return`${ze(e)}`}const Ae={days:"Domingo_Lunes_Martes_Miércoles_Jueves_Viernes_Sábado".split("_"),daysShort:"Dom_Lun_Mar_Mié_Jue_Vie_Sáb".split("_"),months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),monthsShort:"Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),firstDayOfWeek:1,format24h:!0,pluralDay:"dias"},We={components:{ReporteSemanal:G,ReporteAnual:oe,ReporteEmisor:ue},data(){const e=D()().format("YYYY-MM-DD"),t="Todos",a=[];return{myLocale:Ae,drawerFilters:!1,tab:"semanal",mes:e,mesbk:null,emisor:t,emisorOptions:a,mesOptions:Ee,dataTableAnual:[],dataTableEmisor:[],dataTableSemanal:[]}},methods:{getNameEmisores(e){const t=e.map((e=>({label:e.name,value:e.name})));return t},isDisabledEmisor(){return"semanal"!==this.tab&&"emisor"!==this.tab},isDisabledMes(){return"anual"===this.tab},exportExcelAnual(){this.$refs.reporte_anual.exportExcel()},exportPDFAnual(){this.$refs.reporte_anual.exportPDF()},exportExcelEmisor(){this.$refs.reporte_emisor.exportExcel()},exportPDFEmisor(){this.$refs.reporte_emisor.exportPDF()},exportExcelSemanal(){this.$refs.reporte_semanal.exportExcel()},exportPDFSemanal(){this.$refs.reporte_semanal.exportPDF()},async getDataGrafica(){const e=await je();this.dataTableAnual=e},async getReporte(e,t){this.$q.loading.show();const a=Ce(),s=e??a,l={month:s,year:t},o=await Fe(l);this.dataTableEmisor=o,this.dataTableSemanal=o;const n=[{label:"Todos",value:"Todos"},...this.getNameEmisores(o)];this.emisorOptions=n,this.$q.loading.hide()},async getReporteByEmisor(e){this.$q.loading.show();let[t,a]=this.mes.split("-");if(!a){const e=this.mes.split("/");t=e[0],a=e[1]}const s={month:a,year:t};if("Todos"===e.label){const e=await Fe(s);return this.dataTableSemanal=e,void this.$q.loading.hide()}const l=await Fe(s),o=l.filter((t=>t.name===e.label));this.dataTableSemanal=o,this.$q.loading.hide()},async filterByEmisor(e){this.$q.loading.show();let[t,a]=this.mes.split("/");if(!a){const e=this.mes.split("-");t=e[0],a=e[1]}const s={month:a,year:t};if("Todos"===e){const e=await Fe(s);return this.dataTableEmisor=e,void this.$q.loading.hide()}const l=await Fe(s),o=l.filter((t=>t.name===e));this.dataTableEmisor=o,this.$q.loading.hide()}},watch:{tab(e,t){e!==t&&(this.emisor={label:"Todos",value:"Todos"})},mes(e,t){if(e!==t){const[t,a]=e.split("/");this.getReporte(a,t)}},emisor(e,t){if(e!==t){if("semanal"===this.tab)return void this.getReporteByEmisor(e);"emisor"===this.tab&&this.filterByEmisor(e.label)}}},mounted(){const e=(new Date).getMonth()+1,t=(new Date).getFullYear();this.getDataGrafica(),this.getReporte(e,t)}};var Se=a(4842),qe=a(4554),Oe=a(3944),Me=a(5626),Ne=a(2165),$e=a(8516),Ie=a(7547),Ze=a(3269),Qe=a(5906),Le=a(6602),Pe=a(2901),Ue=a(7704),Ve=a(677);const Re=(0,P.Z)(We,[["render",k]]),Je=Re;H()(We,"components",{QInput:Se.Z,QIcon:qe.Z,QPopupProxy:Oe.Z,QDate:Me.Z,QBtn:Ne.Z,QSelect:$e.Z,QTabs:Ie.Z,QTab:Ze.Z,QTabPanels:Qe.Z,QTabPanel:Le.Z,QDrawer:Pe.Z,QScrollArea:Ue.Z}),H()(We,"directives",{ClosePopup:Ve.Z});const Ye={__name:"Informe.page",setup(e){return(e,t)=>((0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(Je)]))}},Be=Ye,He=Be},6700:(e,t,a)=>{var s={"./af":5809,"./af.js":5809,"./ar":6069,"./ar-dz":481,"./ar-dz.js":481,"./ar-kw":3994,"./ar-kw.js":3994,"./ar-ly":3312,"./ar-ly.js":3312,"./ar-ma":239,"./ar-ma.js":239,"./ar-ps":7916,"./ar-ps.js":7916,"./ar-sa":1863,"./ar-sa.js":1863,"./ar-tn":9607,"./ar-tn.js":9607,"./ar.js":6069,"./az":9281,"./az.js":9281,"./be":9945,"./be.js":9945,"./bg":9384,"./bg.js":9384,"./bm":1476,"./bm.js":1476,"./bn":3345,"./bn-bd":216,"./bn-bd.js":216,"./bn.js":3345,"./bo":1713,"./bo.js":1713,"./br":9655,"./br.js":9655,"./bs":7296,"./bs.js":7296,"./ca":3049,"./ca.js":3049,"./cs":2722,"./cs.js":2722,"./cv":8039,"./cv.js":8039,"./cy":5563,"./cy.js":5563,"./da":1960,"./da.js":1960,"./de":7533,"./de-at":6674,"./de-at.js":6674,"./de-ch":7732,"./de-ch.js":7732,"./de.js":7533,"./dv":8343,"./dv.js":8343,"./el":7004,"./el.js":7004,"./en-au":2517,"./en-au.js":2517,"./en-ca":4929,"./en-ca.js":4929,"./en-gb":9722,"./en-gb.js":9722,"./en-ie":6923,"./en-ie.js":6923,"./en-il":8050,"./en-il.js":8050,"./en-in":9624,"./en-in.js":9624,"./en-nz":540,"./en-nz.js":540,"./en-sg":4375,"./en-sg.js":4375,"./eo":40,"./eo.js":40,"./es":9720,"./es-do":5595,"./es-do.js":5595,"./es-mx":180,"./es-mx.js":180,"./es-us":1563,"./es-us.js":1563,"./es.js":9720,"./et":9217,"./et.js":9217,"./eu":9474,"./eu.js":9474,"./fa":5243,"./fa.js":5243,"./fi":7645,"./fi.js":7645,"./fil":5350,"./fil.js":5350,"./fo":5622,"./fo.js":5622,"./fr":1467,"./fr-ca":3439,"./fr-ca.js":3439,"./fr-ch":4335,"./fr-ch.js":4335,"./fr.js":1467,"./fy":6026,"./fy.js":6026,"./ga":2969,"./ga.js":2969,"./gd":1347,"./gd.js":1347,"./gl":1085,"./gl.js":1085,"./gom-deva":904,"./gom-deva.js":904,"./gom-latn":9597,"./gom-latn.js":9597,"./gu":8705,"./gu.js":8705,"./he":9128,"./he.js":9128,"./hi":2821,"./hi.js":2821,"./hr":9002,"./hr.js":9002,"./hu":4814,"./hu.js":4814,"./hy-am":658,"./hy-am.js":658,"./id":9344,"./id.js":9344,"./is":8204,"./is.js":8204,"./it":376,"./it-ch":1549,"./it-ch.js":1549,"./it.js":376,"./ja":9293,"./ja.js":9293,"./jv":6401,"./jv.js":6401,"./ka":482,"./ka.js":482,"./kk":7329,"./kk.js":7329,"./km":4241,"./km.js":4241,"./kn":3566,"./kn.js":3566,"./ko":2742,"./ko.js":2742,"./ku":2915,"./ku-kmr":2346,"./ku-kmr.js":2346,"./ku.js":2915,"./ky":6846,"./ky.js":6846,"./lb":4959,"./lb.js":4959,"./lo":2188,"./lo.js":2188,"./lt":8967,"./lt.js":8967,"./lv":1245,"./lv.js":1245,"./me":751,"./me.js":751,"./mi":7501,"./mi.js":7501,"./mk":1643,"./mk.js":1643,"./ml":5597,"./ml.js":5597,"./mn":7893,"./mn.js":7893,"./mr":9065,"./mr.js":9065,"./ms":4703,"./ms-my":4645,"./ms-my.js":4645,"./ms.js":4703,"./mt":4365,"./mt.js":4365,"./my":3788,"./my.js":3788,"./nb":7357,"./nb.js":7357,"./ne":9109,"./ne.js":9109,"./nl":3746,"./nl-be":1985,"./nl-be.js":1985,"./nl.js":3746,"./nn":7175,"./nn.js":7175,"./oc-lnc":566,"./oc-lnc.js":566,"./pa-in":2733,"./pa-in.js":2733,"./pl":182,"./pl.js":182,"./pt":505,"./pt-br":7839,"./pt-br.js":7839,"./pt.js":505,"./ro":9578,"./ro.js":9578,"./ru":2328,"./ru.js":2328,"./sd":641,"./sd.js":641,"./se":1758,"./se.js":1758,"./si":6680,"./si.js":6680,"./sk":5016,"./sk.js":5016,"./sl":7424,"./sl.js":7424,"./sq":8635,"./sq.js":8635,"./sr":9038,"./sr-cyrl":3716,"./sr-cyrl.js":3716,"./sr.js":9038,"./ss":4771,"./ss.js":4771,"./sv":3517,"./sv.js":3517,"./sw":9419,"./sw.js":9419,"./ta":5959,"./ta.js":5959,"./te":1739,"./te.js":1739,"./tet":2264,"./tet.js":2264,"./tg":4792,"./tg.js":4792,"./th":8328,"./th.js":8328,"./tk":702,"./tk.js":702,"./tl-ph":7814,"./tl-ph.js":7814,"./tlh":797,"./tlh.js":797,"./tr":6691,"./tr.js":6691,"./tzl":6891,"./tzl.js":6891,"./tzm":6362,"./tzm-latn":7855,"./tzm-latn.js":7855,"./tzm.js":6362,"./ug-cn":7606,"./ug-cn.js":7606,"./uk":513,"./uk.js":513,"./ur":3803,"./ur.js":3803,"./uz":344,"./uz-latn":8957,"./uz-latn.js":8957,"./uz.js":344,"./vi":3,"./vi.js":3,"./x-pseudo":8842,"./x-pseudo.js":8842,"./yo":2083,"./yo.js":2083,"./zh-cn":4536,"./zh-cn.js":4536,"./zh-hk":2475,"./zh-hk.js":2475,"./zh-mo":7593,"./zh-mo.js":7593,"./zh-tw":4746,"./zh-tw.js":4746};function l(e){var t=o(e);return a(t)}function o(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=o,e.exports=l,l.id=6700}}]);